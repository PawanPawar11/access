<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MongoDB CRUD App</title>
</head>
<body>
  <h1 style="text-align: center;">MongoDB CRUD Operations</h1>
  <hr>

  <!-- Add a new Document -->
  <fieldset>
    <legend><h3>Add Document</h3></legend>
    <label for="addField">Data:</label>
    <input type="text" id="addField" placeholder="Add Data">
    <button onclick="addDocument()">Add</button>
  </fieldset>
  <br>

  <!-- View Documents -->
  <fieldset>
    <legend><h3>View Documents</h3></legend>
    <button onclick="viewDocuments()">View All</button>
    <ul id="documentList"></ul>
  </fieldset>
  <br>

  <!-- Update Document -->
  <fieldset>
    <legend><h3>Edit Document</h3></legend>
    <label for="editId">ID:</label>
    <input type="text" id="editId" placeholder="ID">
    <label for="editField">New Data:</label>
    <input type="text" id="editField" placeholder="New Data">
    <button onclick="editDocument()">Edit</button>
  </fieldset>
  <br>

  <!-- Delete Document -->
  <fieldset>
    <legend><h3>Delete Document</h3></legend>
    <label for="deleteId">ID:</label>
    <input type="text" id="deleteId" placeholder="ID">
    <button onclick="deleteDocument()">Delete</button>
  </fieldset>
  <br>

  <script>
    const apiUrl = 'http://localhost:3000';

    function addDocument() {
      const data = document.getElementById('addField').value;
      fetch(`${apiUrl}/add`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ data: data })
      }).then(response => response.text()).then(data => alert(data));
    }

    function viewDocuments() {
      fetch(`${apiUrl}/view`).then(response => response.json()).then(data => {
        const list = document.getElementById('documentList');
        list.innerHTML = '';
        data.forEach(doc => {
          const listItem = document.createElement('li');
          listItem.textContent = `ID: ${doc._id}, Data: ${doc.data}`;
          list.appendChild(listItem);
        });
      });
    }

    function editDocument() {
      const id = document.getElementById('editId').value;
      const newData = document.getElementById('editField').value;

      fetch(`${apiUrl}/edit/${id}`, {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ data: newData })
      }).then(response => response.text()).then(data => alert(data));
    }

    function deleteDocument() {
      const id = document.getElementById('deleteId').value;

      fetch(`${apiUrl}/delete/${id}`, { method: 'DELETE' })
        .then(response => response.text())
        .then(data => alert(data));
    }
  </script>
</body>
</html>

